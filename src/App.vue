<template>
  <div id="app">
    <full-page :options="options" id="fullpage" ref="fullpage">
      <div class="section" id="section1">
        <img src="https://bj.bcebos.com/szbwg/tmp/test_a/lm/Text.svg" id="wyzc">
        <img src="https://bj.bcebos.com/szbwg/tmp/test_a/lm/å‘ä¸Šæ»‘åŠ¨æŸ¥çœ‹.svg" id="xshd">
      </div>
      <div class="section" id="section2">
        <p id="new_in_cuc" class="base_text">
          {{ p.admission_time }}ï¼Œ<br>
          ä½ ä» <span class="emphasis">{{ p.province }}</span> æ¥åˆ°ä¸­ä¼ ï¼Œ<br>
          æ¨å¼€äº† <span class="emphasis">{{ p.dormitory }}</span> çš„å¤§é—¨ã€‚<br>
          <span class="emphasis">{{ p.earliest_course_time }}ï¼Œ{{ p.earliest_course_loc }}</span> <br>
          æ˜¯ä½ å¤§å­¦ç”Ÿæ¶¯çš„ç¬¬ä¸€é—¨è¯¾â€”â€”<br>
          <span class="emphasis">{{ p.earliest_course }}</span><br>
          <!--          é™¤æ­¤ä¹‹å¤–è¿˜æœ‰-->
          <!--          <span class="emphasis" id="courses_list">-->
          <!--          è¥¿æ–¹ç¤¾ä¼šä¸æ–‡åŒ–ã€è‹±è¯­è¯­éŸ³ä¸è¯µè¯»è‰ºæœ¯ï¼ˆ1ï¼‰ã€é€†å‘å·¥ç¨‹ä¸è½¯ä»¶å®‰å…¨ã€ç½‘ç»œå®‰å…¨ã€é«˜çº§æ•°æ®åº“æŠ€æœ¯ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘åŸç†ã€äººå·¥æ™ºèƒ½ã€æ–°é—»ç†è®ºã€å¯†ç å­¦åº”ç”¨å®è·µã€æ•°å­—å†…å®¹å®‰å…¨åº”ç”¨å®è·µã€æ€æƒ³æ”¿æ²»ç†è®ºè¯¾ç»¼åˆå®è·µã€æ¯›æ³½ä¸œæ€æƒ³å’Œä¸­å…±å…šå²ã€å¤§å­¦è‹±è¯­ï¼ˆ4ï¼‰ã€å¤§å­¦ç‰©ç†ï¼ˆ1ï¼‰ã€å¤§å­¦ç‰©ç†å®éªŒï¼ˆ1ï¼‰ã€å¤§å­¦æ•°å­¦ï¼ˆ1ï¼‰ã€å¤§å­¦æ•°å­¦å®éªŒï¼ˆ1ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€å®éªŒã€å¤§å­¦è‹±è¯­ï¼ˆ3ï¼‰ã€å¤§å­¦ç‰©ç†ï¼ˆ2ï¼‰ã€å¤§å­¦ç‰©ç†å®éªŒï¼ˆ2ï¼‰ã€å¤§å­¦æ•°å­¦ï¼ˆ2ï¼‰ã€å¤§å­¦æ•°å­¦å®éªŒï¼ˆ2ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€ï¼ˆ2ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€å®éªŒï¼ˆ2ï¼‰ã€å¤§å­¦è‹±è¯­ï¼ˆ2ï¼‰ã€å¤§å­¦ç‰©ç†ï¼ˆ3ï¼‰ã€å¤§å­¦ç‰©ç†å®éªŒï¼ˆ3ï¼‰ã€å¤§å­¦æ•°å­¦ï¼ˆ3ï¼‰ã€å¤§å­¦æ•°å­¦å®éªŒï¼ˆ3ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€ï¼ˆ3ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€å®éªŒï¼ˆ3ï¼‰ã€å¤§å­¦è‹±è¯­ï¼ˆ1ï¼‰ã€å¤§å­¦ç‰©ç†ï¼ˆ4ï¼‰ã€å¤§å­¦ç‰©ç†å®éªŒï¼ˆ4ï¼‰ã€å¤§å­¦æ•°å­¦ï¼ˆ4ï¼‰ã€å¤§å­¦æ•°å­¦å®éªŒï¼ˆ4ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€ï¼ˆ4ï¼‰ã€å¤§å­¦è®¡ç®—æœºåŸºç¡€å®éªŒï¼ˆ4ï¼‰ã€‚-->
          <!--          </span>-->
        </p>
      </div>
      <div class="section" id="section3">
        <p id="new_in_cuc" class="base_text">
          ä½ åœ¨ğŸš¢ä¸Šäº† <span class="emphasis">{{ p.course_num }}</span>é—¨è¯¾<br>
          åœ¨è¯¾å ‚ä¸Šåº¦è¿‡äº†<span class="emphasis">{{ p.credit_hours }}</span>å°æ—¶<br>
          <!--          ç›¸å½“äº<span class="emphasis">{{ p.time_second }}</span>ç§’<br>-->
          ç›¸å½“äº<span class="emphasis">{{ p.time_day }}</span>å¤©<br>
          åœ¨<span class="emphasis">{{ p.required_num }}</span>é—¨å¿…ä¿®å’Œ<span class="emphasis">{{ p.elective_num }}</span>é—¨é€‰ä¿®ä¸­<br>
          ä½ å­¦å¾—æœ€å¥½çš„è¯¾ç¨‹æ˜¯<br>
          <span class="emphasis">{{ p.highest_score_course }}</span><br>
          è€ƒè¿‡æœ€å·®çš„è¯¾ç¨‹æ˜¯<br>
          <span class="emphasis">{{ p.lowest_score_course }}</span><br>
          ä»…ä»…<span class="emphasis">{{ p.lowest_score }}</span>åˆ†<br>
          é™ªä¼´ä½ æœ€å¤šçš„æ˜¯<span class="emphasis">{{ p.teacher_name }}</span>è€å¸ˆ<br>
          ä½ ä»¬ä¸€èµ·åº¦è¿‡äº†<span class="emphasis">{{ p.teacher_time }}</span>å­¦æ—¶
        </p>
      </div>
      <div class="section" id="section4">
        <p id="new_in_cuc" class="base_text">
          æœ€è¿‘ä¸€å¹´ï¼Œ<br>
          ä½ å¯¹<span class="emphasis">{{ p.highest_spender }}</span>æƒ…æœ‰ç‹¬é’Ÿ<br>
          æ€»æ¶ˆè´¹é«˜è¾¾<span class="emphasis">{{ p.highest_spender_money }}</span>å…ƒ<br>
          äººé€å¤–å·â€œ<span class="emphasis">{{ p.nickname }}</span>â€

        </p>
      </div>
      <div class="section" id="section5">
        <img src="https://bj.bcebos.com/szbwg/tmp/xwu/Group 178.svg" id="bykl"
             @click="feedback">
      </div>
    </full-page>
  </div>
</template>


<style>


#section1 {
  background: url(https://bj.bcebos.com/szbwg/tmp/test_a/lm/51s.svg) no-repeat bottom center;
  background-size: cover;
}

#section2 {
  background: url(https://bj.bcebos.com/szbwg/tmp/test_a/41.svg) no-repeat bottom center;
  background-size: cover;
}

#section3 {
  background: url(https://bj.bcebos.com/szbwg/tmp/test_a/4s2.svg) no-repeat bottom center;
  background-size: cover;
}

#section4 {
  background: url(https://bj.bcebos.com/szbwg/tmp/test_a/52.svg) no-repeat bottom center;
  background-size: cover;
}

#section5 {
  background: url(https://bj.bcebos.com/szbwg/tmp/test_a/11.svg) no-repeat bottom center;
  background-size: cover;
}

#wyzc {
  /*å®½åº¦ä¸ºæœ€å¤§å®½åº¦çš„40%ï¼Œé«˜åº¦ç¼©æ”¾ï¼Œç»å¯¹å®šä½ï¼Œtopä¸ºæœ€å¤§é«˜åº¦çš„10%*/
  width: 40%;
  height: auto;
  position: absolute;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
}

#xshd {
  /*å®½åº¦ä¸ºæœ€å¤§å®½åº¦çš„40%ï¼Œé«˜åº¦ç¼©æ”¾ï¼Œç»å¯¹å®šä½ï¼Œtopä¸ºæœ€å¤§é«˜åº¦çš„10%*/
  width: 20%;
  height: auto;
  position: absolute;
  bottom: 2%;
  left: 50%;
  transform: translateX(-50%);
}

#bykl {
  /*å®½åº¦ä¸ºæœ€å¤§å®½åº¦çš„40%ï¼Œé«˜åº¦ç¼©æ”¾ï¼Œç»å¯¹å®šä½ï¼Œtopä¸ºæœ€å¤§é«˜åº¦çš„10%*/
  width: 382/414;
  height: auto;
  position: absolute;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
}


.base_text {
  color: #fff;
  position: absolute;
  left: 10%;
  top: 10%;
  font-size: 1.2rem;
  /*å®‹ä½“ã€è¡Œé—´è·1.5*/
  font-family: SimSun, serif;
  line-height: 1.5;
  will-change: opacity, transform;
  overflow: hidden;
}

#section4 .base_text {
  color: #000000 !important;
}

/*è®¾ç½®å¼ºè°ƒæ–‡å­—æ ·å¼*/

.emphasis {
  color: #FAFF00;
  font-weight: bold;
  font-size: 1.5rem;
}

/*#courses_list {*/
/*  !*è‡ªåŠ¨æ¢è¡Œï¼Œæœ€é•¿ä¸º5è¡Œï¼Œå¤šä½™çš„è¡Œéšè—*!*/
/*  word-wrap: break-word;*/
/*  word-break: break-all;*/
/*  -webkit-line-clamp: 5;*/
/*  display: -webkit-box;*/
/*  -webkit-box-orient: vertical;*/
/*  overflow: hidden;*/
/*  font-size: 1.5rem;*/
/*  width: 80%;*/

/*}*/

</style>


<script>
import gsap from 'gsap'
import ScrollTrigger from 'gsap/ScrollTrigger'
import {onMounted} from "vue";


gsap.registerPlugin(ScrollTrigger);

export default {

  name: 'app',
  data() {
    return {
      p: {},
      options: {
        licenseKey: 'YOUR_KEY_HERE',
        onLeave: this.onLeave,
        afterRender: this.afterRender,
        scrollOverflow: true,
        scrollBar: false,
        menu: '#menu',
        navigation: false,
        anchors: ['page1', 'page2', 'page3'],
        normalScrollElements: ['courses_list'],
        sectionsColor: ['#fff', '#ff5f45', '#0798ec', '#fec401', '#1bcee6', '#ee1a59', '#2c3e4f', '#ba5be9', '#b4b8ab']
      }
    }
  },
  methods: {
    afterRender() {
      // #wyzcæ¸å…¥æ•ˆæœï¼Œä»ä¸Šæ–¹æ»‘å‡ºï¼Œé€æ˜åº¦ä»0åˆ°1ï¼Œåªæ˜¾ç¤ºä¸€æ¬¡ã€‚
      gsap.from("#wyzc", {duration: 0.5, y: -50, opacity: 0})
      // #xshdé—ªåŠ¨æ•ˆæœï¼ŒæŒç»­é—ªçƒï¼Œä»å·¦åˆ°å³é—ªçƒ
      gsap.from("#xshd", {duration: 0.8, opacity: 0, repeat: -1, yoyo: true, delay: 2})
    },

    onLeave(current, next) {
      let index = next.index
      if (index == 1) {
        gsap.from("#new_in_cuc", {duration: 1, y: -50, opacity: 0, delay: 1})
        console.log("111")
        console.log(this.p)
        //è®¾ç½®#courses_listä»å·¦å‘å³æ»‘åŠ¨ï¼Œç›´åˆ°æœ€æœ€å³åœä¸‹ï¼Œå…ˆæ…¢åå¿«åæ…¢ã€‚
        // let tl = gsap.timeline({repeat: 0, delay: 10})
        // let element_width = window.getComputedStyle(document.querySelector('#courses_list'), null).width
        // let length = element_width.slice(0, -2)
        // tl.to("#courses_list", {duration: 20, x: -length, ease: 'power2.inOut'})
      }


    },

    feedback() {
      window.location.href = 'https://neixiangde.ren/contact-form'
    }
  },
  mounted() {

    //  è·å–urlå‚æ•° username å’Œ password
    let json_key = new URLSearchParams(window.location.search).get('key');
    const json_url = "https://cuc.neixiangde.ren/2023grads/" + json_key
    console.log("data url:" + json_url)
    // ä»è·å–çš„urlä¸­è·å–jsonï¼Œæ”¾ç½®åˆ°this.p
    fetch(json_url)
        .then(response => response.json())
        .then(data => {
          this.p = data
        });

  }
}
</script>

